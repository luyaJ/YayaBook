# 一、HTTP 方法

## GET 

> 获取资源

## HEAD

> 获取报文首部

和 GET 方法类似，但是不返回报文实体主体部分。主要用于确认 URL 的有效性以及资源更新的日期时间等。

## POST

> 传输实体主体

POST 主要用来传输数据，而 GET 主要用来获取资源。

## PUT

> 上传文件

由于自身不带验证机制，任何人都可以上传文件，因此存在安全性问题，一般不使用该方法。

## PATCH

> 对资源进行部分修改

PUT 也可以用于修改资源，但是只能完全替代原始资源， PATCH 允许部分修改。

## DELETE

> 删除文件

与 PUT 功能相反，并且同样不带验证机制。

## OPTIONS

> 查询支持的方法

查询指定的 URL 能够支持的方法。

会返回 `Allow: GET, POST, HEAD, OPTIONS` 这样的内容。

# 二、HTTP 状态码

## 1XX 信息状态码（Informational）

**100 Continue**：表明到目前为止都很正常，客户端可以继续发送请求或者忽略这个响应。（接收的请求正在处理）

## 2XX 成功状态码 （Success）

**200 OK**

204 No Content：请求已经处理成功，但是返回的响应报文中不包含实体的主体部分。一般只需要从客户端往服务器发送信息，而不需要返回数据时使用。

**206 Partial Content**：表示客户端进行了范围请求。

## 3XX 重定向状态码（Redirection）

**301 Moved Permanently**：永久重定向。

**302 Found**：临时重定向。

**303 See Other**：和 302 有着相同的功能，但是 303 明确要求客户端使用 GET 方法获取资源。

**304 Not Modified**：如果请求报文首部包含一些条件，例如：If-Match，If-Modified-Since，If-None-Match，If-Range，If-Unmodified-Since，如果不满足条件，则服务器会返回 304 状态码。

**307 Temporary Redirect** ：临时重定向，与 302 的含义类似，但是 307 要求浏览器不会把重定向请求的 POST 方法改成 GET 方法。

## 4XX 客户端错误代码（Client Error）

**400 Bad Request**：请求报文中存在语法错误。

**401 Unauthorized**：该状态码表示发送的请求需要有认证信息。

**403 Forbidden**：请求被拒绝

**404 Not Found**

# 三、HTTP 应用

## 连接管理

**短连接与长连接**

当浏览器访问一个包含多张图片的 HTML 页面时，除了请求访问的 HTML 页面资源，还会请求图片资源。如果每进行一次 HTTP 通信就要新建一个 TCP 连接，那么开销会很大。

长连接只需要建立一次 TCP 连接就能进行多次 HTTP 通信。

- 从 HTTP/1.1 开始默认是长连接的，如果要断开连接，需要由客户端或者服务器端提出断开，使用 `Connection : close`；
- 在 HTTP/1.1 之前默认是短连接的，如果需要使用长连接，则使用 `Connection : Keep-Alive`。

# 四、GET 和 POST

## 作用

GET 用于获取资源，POST用于传输实体主体。

## 参数

GET 的参数在 URL 中，而 POST 的参数储存在实体主体中 。不能因为 POST 参数存储在实体主体中就认为它的安全性更高，因为仍然可以通过一些抓包工具查看。

因为 URL 只支持 ASCII 码，因此 GET 的参数中如果存在中文等字符就需要先进行编码。而 POST 支持标准字符集。

## 安全

安全的 HTTP 方法不会改变服务器状态。

GET 方法是安全的，而 POST 不是，因为 POST  的目的是传输实体主体内容，可能是用户上传的表单数据，上传成功之后，服务器可能把这个数据存储到数据库中，因此状态发生了改变。

安全的方法有：GET、HEAD、OPTIONS

不安全的方法有：POST、PUT、DELETE

## 幂等性

幂等的 HTTP 方法，同样的请求被执行一次和连续执行多次的效果是一样的，服务器的状态也是一样的。

所有的安全方法（GET、HEAD、OPTIONS）也都是幂等的。

在正确实现的条件下，只有 POST 方法不是幂等的。 

## 其他区别

1.get 产生一个 tcp 数据包，post 产生两个。

2.get 请求会把 headers 和 data 数据一起发送出去。post 请求时，浏览器先发送 headers，服务器100 继续，浏览器再发送 data。

# 三、HTTPS

HTTP 有以下安全性问题：

* 使用明文进行通信，内容可能被窃听
* 不验证通信方的身份，通信方的身份可能遭遇伪装
* 无法证明报文的完整性，报文可能被篡改。

HTTPS 并不是新的协议，而是让 HTTP 先和 SSL 通信，再由 SSL 和 TCP 通信，也就是说 HTTPS 使用了隧道进行通信。

通过使用 SSL，HTTPS 具有了加密（防窃听），认证（防伪装）和完整性保护（防篡改）。

## 加密

### 1.对称密钥加密

即加密和解密使用同一把密钥。

* 优点：运算速度快
* 缺点：无法安全地将密钥传输给通信方

### 2.非对称密钥加密

又称为公开密钥加密，加密和解密使用不同的密钥。

* 优点：可以安全地将公开密钥传送给通信发送方
* 缺点：运算速度慢

### 3.HTTPS 采用的加密方式

前面说到对称密钥加密方式的传输效率更高，但是无法安全的将密钥 Secret Key 传输给通信方。而非对称密钥加密方式可以保证传输的安全性，因此我们可以利用非对称密钥加密方式把 Secret Key 传输给通信方。HTTPS采用了这种混合的加密机制。

* 使用非对称密钥加密的方式，传输对称密钥加密方式所需要的 Secret Key，从而保证安全性；
* 获取到 Secret Key 后，再使用对称密钥加密方式进行通信，从而保证效率。

## 缺点

* 因为需要进行加密解密等过程，因此速度会更慢
* 需要支付证书授权的高额费用

参考资料：[CS-Notes HTTP](http://www.cyc2018.xyz/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/HTTP/HTTP.html)



